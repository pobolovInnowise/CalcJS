(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,n(a.key),a)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.leftOperand=null,this.displayValue="0",this.clearOnNextInput=!1,this.hasDot=!1,this.memoryValue=0,this.readyToExecuteBinaryOperation=!1},n=[{key:"roundResult",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return function(t){var e=t>=0?1:-1;return parseInt(e*t+.5,10)*e}(t*Math.pow(10,e))/Math.pow(10,e)}},{key:"add",value:function(t){this.leftOperand=this.leftOperand+t}},{key:"subtract",value:function(t){this.leftOperand=this.leftOperand-t}},{key:"multiply",value:function(t){this.leftOperand=this.leftOperand*t}},{key:"divide",value:function(t){if(0===t)throw new Error("Division by zero");this.leftOperand=this.leftOperand/t}},{key:"squareRoot",value:function(){var t=parseFloat(this.getDisplayValue());if(t<0)throw new Error("Square root from negative value");t=Math.pow(t,.5),this.setDisplayValue(t.toString())}},{key:"cubeRoot",value:function(){var t=parseFloat(this.getDisplayValue()),e=!1;t<0&&(e=!0,t*=-1),t=Math.pow(t,1/3),e&&(t*=-1),this.setDisplayValue(this.roundResult(t).toString())}},{key:"powerTwo",value:function(){var t=parseFloat(this.getDisplayValue());t*=t,this.setDisplayValue(t.toString())}},{key:"tenPowerX",value:function(){var t=parseFloat(this.getDisplayValue());t=Math.pow(10,t),this.setDisplayValue(t.toString())}},{key:"powerThree",value:function(){var t=parseFloat(this.getDisplayValue());t*=t*t,this.setDisplayValue(t.toString())}},{key:"xPowerY",value:function(t){this.leftOperand=this.roundResult(Math.pow(this.leftOperand,t))}},{key:"xRootY",value:function(t){function e(t,e){if(0===e)throw new Error("Cannot take root of degree zero");if(0===t)return 0;var n=1;if(t<0){if(e%2==0)throw new Error("Cannot take even root of negative number");n=-1,t=-t}var r=t/e;0===r&&(r=1);for(var a=0;a<50;a++){for(var o=r,i=1,u=0;u<e-1;u++)i*=r;if(r=((e-1)*r+t/i)/e,Math.abs(r-o)<1e-12)break}return n*r}var n,r=parseFloat(this.getLeftOperand());if(t<0){if(0===r)throw new Error("Cannot take root of degree zero");n=1/e(r,-t)}else n=e(r,t);var a=this.roundResult(n);this.leftOperand=a,this.setDisplayValue(a.toString())}},{key:"inversion",value:function(){var t=parseFloat(this.getDisplayValue());t=1/t,this.setDisplayValue(t.toString())}},{key:"changeSign",value:function(){var t=parseFloat(this.getDisplayValue());t*=-1,this.setDisplayValue(t.toString())}},{key:"percent",value:function(t){if(t.pendingCommand){var e=parseFloat(this.getDisplayValue()),n=parseFloat(this.getLeftOperand()),r=null,a=t.pendingCommand.constructor.name;"AddCommand"===a?r=n+n/100*e:"SubtractCommand"===a?r=n-n/100*e:"MultiplyCommand"===a?r=n/100*e:"DivideCommand"===a&&(r=n/(e/100)),this.setDisplayValue(r.toString()),this.clearOnNextInput=!0,t.pendingCommand=null}}},{key:"factorial",value:function(){var t=parseFloat(this.getDisplayValue());if(t<0||t%1!=0)throw new Error("Factorial is only possible for positive integers");if(0===t||1===t)this.setDisplayValue("1");else{for(var e=1,n=2;n<=t;n++)e*=n;this.setDisplayValue(e.toString())}}},{key:"memoryRecall",value:function(){this.displayValue=this.memoryValue.toString()}},{key:"memoryClear",value:function(){this.memoryValue=0}},{key:"memoryAdd",value:function(){this.memoryValue+=+this.displayValue,this.clearOnNextInput=!0}},{key:"memorySubtract",value:function(){this.memoryValue-=+this.displayValue,this.clearOnNextInput=!0}},{key:"clear",value:function(){this.leftOperand=0,this.displayValue="0",this.clearOnNextInput=!1,this.hasDot=!1}},{key:"getLeftOperand",value:function(){return this.leftOperand}},{key:"setLeftOperand",value:function(t){this.leftOperand=t}},{key:"getDisplayValue",value:function(){return this.displayValue}},{key:"setDisplayValue",value:function(t){this.displayValue=t,this.hasDot=t.includes(".")}}],n&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function a(t,e,n){return e=i(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(e,n||[],i(t).constructor):e.apply(t,n))}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function y(t,e,n){return e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function p(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}var h=function(){return y(function t(e){s(this,t),this.calculator=e,this.value=null},[{key:"execute",value:function(){throw new Error("method execute should be implemented")}}])}(),d=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.add(this.value)}}])}(h),m=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.xPowerY(this.value)}}])}(h),v=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.xRootY(this.value)}}])}(h),g=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.subtract(this.value)}}])}(h),b=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.multiply(this.value)}}])}(h),w=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).value=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.divide(this.value)}}])}(h),O=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.squareRoot()}}])}(h),k=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.cubeRoot()}}])}(h),x=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.powerTwo()}}])}(h),E=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.inversion()}}])}(h),V=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.tenPowerX()}}])}(h),S=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.powerThree()}}])}(h),D=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.factorial()}}])}(h),C=function(t){function e(t,n){var r;return s(this,e),(r=a(this,e,[t])).invoker=n,r}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.percent(this.invoker)}}])}(h),T=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.clear()}}])}(h),I=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.memoryRecall()}}])}(h),R=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.memoryClear()}}])}(h),B=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.memoryAdd()}}])}(h),P=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.memorySubtract()}}])}(h),j=function(t){function e(t){return s(this,e),a(this,e,[t])}return u(e,t),y(e,[{key:"execute",value:function(){this.calculator.changeSign()}}])}(h);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t){if("object"!=N(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}var q=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.calculator=e,this.pendingCommand=null},e=[{key:"processMemoryButtons",value:function(t){t.execute()}},{key:"processInput",value:function(t,e){var n=this.calculator.getDisplayValue();this.calculator.clearOnNextInput?("dot"===t?this.calculator.setDisplayValue("0."):this.calculator.setDisplayValue(String(e)),this.calculator.clearOnNextInput=!1):"dot"===t?this.calculator.hasDot||this.calculator.setDisplayValue(n+"."):"0"===n||"ERROR"===n?this.calculator.setDisplayValue(String(e)):this.calculator.setDisplayValue(n+String(e)),null!==this.calculator.leftOperand&&(this.calculator.readyToExecuteBinaryOperation=!0)}},{key:"processBinaryOperation",value:function(t){var e=parseFloat(this.calculator.getDisplayValue());if(this.pendingCommand&&!0===this.calculator.readyToExecuteBinaryOperation)try{this.pendingCommand.value=e,this.pendingCommand.execute(),this.calculator.setDisplayValue(String(this.calculator.getLeftOperand())),this.calculator.clearOnNextInput=!0,this.calculator.readyToExecuteBinaryOperation=!1,this.pendingCommand=t}catch(t){console.error(t),this.calculator.setDisplayValue("ERROR"),this.calculator.leftOperand=0,this.pendingCommand=null,this.calculator.clearOnNextInput=!0,this.calculator.readyToExecuteBinaryOperation=!1,this.pendingCommand=null}else this.calculator.leftOperand=e,this.pendingCommand=t,this.calculator.readyToExecuteBinaryOperation=!1,this.calculator.clearOnNextInput=!0}},{key:"processUnaryOperation",value:function(t){try{t.execute()}catch(e){console.log(e),this.calculator.setDisplayValue("ERROR"),this.calculator.leftOperand=0,this.pendingCommand=null,this.calculator.clearOnNextInput=!0,this.calculator.readyToExecuteBinaryOperation=!1,this.pendingCommand=t}}},{key:"processEquals",value:function(){var t=parseFloat(this.calculator.getDisplayValue());if(this.pendingCommand)try{this.pendingCommand.value=t,this.pendingCommand.execute(),this.calculator.setDisplayValue(String(this.calculator.getLeftOperand()))}catch(t){console.log(t),this.calculator.setDisplayValue("ERROR"),this.calculator.leftOperand=0,this.pendingCommand=null,this.calculator.clearOnNextInput=!0,this.calculator.readyToExecuteBinaryOperation=!1}finally{this.pendingCommand=null,this.calculator.clearOnNextInput=!0}}},{key:"processClear",value:function(){new T(this.calculator).execute(),this.pendingCommand=null,this.calculator.clearOnNextInput=!1,this.calculator.setDisplayValue("0")}}],e&&F(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),M=new r,_=new q(M);function A(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;switch(t){case"add":return new d(e,n);case"subtract":return new g(e,n);case"multiply":return new b(e,n);case"divide":return new w(e,n);case"square-root":return new O(e);case"cube-root":return new k(e);case"power-two":return new x(e);case"power-three":return new S(e);case"x-power-y":return new m(e,n);case"x-root-y":return new v(e,n);case"factorial":return new D(e);case"inversion":return new E(e);case"ten-power-x":return new V(e);case"percent":return new C(e,_);case"change-sign":return new j(e);case"clear":return new T(e);case"memory-recall":return new I(e);case"memory-clear":return new R(e);case"memory-add":return new B(e);case"memory-subtract":return new P(e);default:return null}}var Y=document.getElementById("leftOperand"),z=document.getElementById("displayValue"),U=document.getElementById("clearOnNextInput"),X=document.getElementById("hasDot"),G=document.getElementById("readyToExecuteBinaryOperation"),H=document.getElementById("theme-toggle"),J=document.getElementById("display"),K=document.querySelectorAll(".number-btn"),Q=document.querySelectorAll(".binary-operation"),W=document.querySelectorAll(".unary-operation"),Z=document.getElementById("equals-btn"),$=document.getElementById("clear-btn"),tt=document.querySelectorAll(".memory");function et(){J.textContent=M.getDisplayValue().toString(),Y.innerText=M.leftOperand,z.innerText=M.displayValue,U.innerText=M.clearOnNextInput,X.innerText=M.hasDot,G.innerText=M.readyToExecuteBinaryOperation,console.log(_.pendingCommand)}H.addEventListener("click",function(){"light"===document.body.className?(document.body.className="dark",H.innerText="change to light"):(document.body.className="light",H.innerText="change to dark")}),et(),tt.forEach(function(t){t.addEventListener("click",function(){var e=A(t.dataset.command,M,0);_.processMemoryButtons(e),et()})}),K.forEach(function(t){t.addEventListener("click",function(){var e=t.dataset.type||"number",n=t.textContent;_.processInput(e,n),et()})}),Q.forEach(function(t){t.addEventListener("click",function(){var e=A(t.dataset.command,M,0);_.processBinaryOperation(e),et()})}),W.forEach(function(t){t.addEventListener("click",function(){var e=A(t.dataset.command,M);_.processUnaryOperation(e),et()})}),Z.addEventListener("click",function(){_.processEquals(),et()}),$.addEventListener("click",function(){_.processClear(),et()})})();